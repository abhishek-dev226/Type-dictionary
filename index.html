<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abhishek's Master Dictionary</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --card: #ffffff; --text: #1e293b; --secondary: #94a3b8; }
        .dark-theme { --bg: #0f172a; --card: #1e293b; --text: #f1f5f9; --secondary: #64748b; }
        
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: 0.3s; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 600px; width: 100%; background: var(--card); padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-top: 20px; }
        
        .header { display: flex; justify-content: space-between; width: 100%; max-width: 600px; align-items: center; }
        .theme-btn { border: none; background: var(--card); padding: 10px; border-radius: 50%; cursor: pointer; font-size: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        input { width: 100%; padding: 15px; border: 2px solid var(--secondary); border-radius: 12px; font-size: 18px; outline: none; box-sizing: border-box; background: var(--card); color: var(--text); }
        input:focus { border-color: var(--primary); }
        
        .result-box { margin-top: 25px; text-align: left; }
        .word-head { font-size: 32px; font-weight: 800; color: var(--primary); display: flex; justify-content: space-between; align-items: center; }
        .pos { font-size: 14px; color: var(--secondary); text-transform: uppercase; letter-spacing: 1px; }
        
        .section { margin-bottom: 20px; padding: 15px; border-radius: 12px; background: rgba(99, 102, 241, 0.05); }
        .label { font-size: 12px; font-weight: bold; color: var(--primary); margin-bottom: 5px; display: block; }
        .meaning { font-size: 20px; font-weight: 600; color: #ef4444; } /* Hindi Meaning in Red */
        .example { font-style: italic; color: var(--secondary); font-size: 15px; }
        
        .chip-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px; }
        .chip { background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 13px; }
        
        .speaker { cursor: pointer; font-size: 24px; transition: transform 0.2s; }
        .speaker:active { transform: scale(0.9); }
    </style>
</head>
<body>

<div class="header">
    <h2 style="margin:0;">WordFinder Pro</h2>
    <button class="theme-btn" onclick="toggleTheme()" id="themeBtn">üåô</button>
</div>

<div class="container">
    <input type="text" id="searchBox" placeholder="Yahan word search karein..." onkeyup="handleSearch(event)">
    <p id="status" style="font-size: 12px; color: var(--secondary); margin-top: 10px;">CSV Loading...</p>
    
    <div id="result" class="result-box"></div>
</div>

<script>
    let csvData = {};

    // 1. Load your CSV file
    function loadCSV() {
        Papa.parse("English-Hindi Dictionary.csv", {
            download: true,
            header: true,
            complete: function(results) {
                results.data.forEach(row => {
                    if(row.eword) csvData[row.eword.toLowerCase().trim()] = row.hword;
                });
                document.getElementById("status").innerText = "‚úÖ 1.7 Lakh Words Loaded Offline";
            }
        });
    }

    // 2. Main Search Function
    async function handleSearch(e) {
        let word = document.getElementById("searchBox").value.toLowerCase().trim();
        let display = document.getElementById("result");
        if (!word) { display.innerHTML = ""; return; }

        let hindiMeaning = csvData[word] || "Hindi meaning available nahi hai";
        
        // UI with basic info from CSV
        display.innerHTML = `
            <div class="word-head">
                ${word} <span class="speaker" onclick="speak('${word}')">üîä</span>
            </div>
            <div class="section">
                <span class="label">HINDI MEANING</span>
                <div class="meaning">${hindiMeaning}</div>
            </div>
            <div id="apiData">Loading extra details (Synonyms, Examples)...</div>
        `;

        // 3. Fetch extra details from API (Synonyms, Examples, Antonyms)
        try {
            let response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
            let data = await response.json();
            
            if (data[0]) {
                let meaning = data[0].meanings[0];
                let apiHtml = `
                    <div class="pos">${meaning.partOfSpeech}</div>
                    <div class="section">
                        <span class="label">ENGLISH DEFINITION</span>
                        <div>${meaning.definitions[0].definition}</div>
                        <p class="example">"${meaning.definitions[0].example || ''}"</p>
                    </div>
                    <div class="section">
                        <span class="label">SYNONYMS</span>
                        <div class="chip-container">
                            ${meaning.synonyms.slice(0, 5).map(s => `<span class="chip">${s}</span>`).join('') || 'None'}
                        </div>
                    </div>
                `;
                document.getElementById("apiData").innerHTML = apiHtml;
            }
        } catch (err) {
            document.getElementById("apiData").innerHTML = "<p style='color:orange;'>Connect to internet for Synonyms & Examples</p>";
        }
    }

    function speak(word) {
        window.speechSynthesis.speak(new SpeechSynthesisUtterance(word));
    }

    function toggleTheme() {
        document.body.classList.toggle("dark-theme");
        document.getElementById("themeBtn").innerText = document.body.classList.contains("dark-theme") ? "‚òÄÔ∏è" : "üåô";
    }

    window.onload = loadCSV;
</script>
</body>
</html>